<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bulk UPC Label Generator - Custom Styles</title>
  <style>
    /* --- RESET --- */
    * { 
      box-sizing: border-box; 
    }
    
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #f3f4f6;
    }

    /* --- INPUT FORM --- */
    .input-panel {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .input-panel h1 { margin-top: 0; color: #2563eb; }
    
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; font-weight: bold; margin-bottom: 5px; }
    
    input, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    
    textarea {
      min-height: 250px; /* Taller input box */
      font-family: monospace;
    }
    
    button {
      background: #2563eb; color: white; border: none; padding: 12px 24px;
      font-size: 16px; font-weight: bold; border-radius: 5px; cursor: pointer;
      margin-right: 10px;
    }
    button:hover { background: #1d4ed8; }
    
    .btn-print { background: #059669; }
    .btn-print:hover { background: #047857; }

    /* --- PREVIEW AREA --- */
    #previewArea {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* --- A4 PAGE STYLING --- */
    .page {
      width: 210mm;
      height: 297mm;
      background: white;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      
      display: flex;
      flex-direction: column;
      
      padding: 10mm; 
      page-break-after: always;
      overflow: hidden;
    }

    .label-container {
      flex: 1; /* Exactly 1/3 height */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      border: 2px solid #000;
      margin-top: -2px; /* Merge borders */
      padding: 5px;
    }

    .label-container:first-child { margin-top: 0; }

    /* --- FONT STYLES --- */
    
    /* Line 1: Large & Extra Bold */
    .txt-primary { 
      font-size: 22pt; 
      font-weight: 900; /* Extra Bold */
      text-transform: uppercase; 
      margin: 2px 0;
      line-height: 1.2;
      color: #000;
    }

    /* Line 2, 3, UPC, Qty: Same Size, Reduced Bold */
    .txt-secondary { 
      font-size: 22pt; /* Same size as Line 1 */
      font-weight: 500; /* Medium weight (Reduced Bold) */
      margin: 2px 0;
      line-height: 1.2;
      color: #000;
    }

    .barcode-svg {
      width: 90%;
      height: 70px;
      margin: 5px 0;
      display: block;
    }

    /* --- PRINT CSS --- */
    @media print {
      @page {
        size: A4;
        margin: 0; 
      }
      
      body {
        margin: 0;
        padding: 0;
        background: white;
      }
      
      .input-panel { display: none !important; }
      
      .page {
        margin: 0;
        box-shadow: none;
        width: 210mm;
        height: 297mm;
        page-break-after: always;
      }
      
      .page:last-child { page-break-after: auto; }
    }
  </style>
</head>
<body>

  <div class="input-panel">
    <h1>Bulk UPC Label Generator</h1>
    <p>Line 1 is Extra Bold. Other lines are large but lighter.</p>

    <div class="form-group">
      <label>Line 1 (Name)</label>
      <input type="text" id="line1" value="Niluâ€™s collection,">
    </div>

    <div class="form-group">
      <label>Line 2 (Company)</label>
      <input type="text" id="line2" value="BLINK COMMERCE PRIVATE LIMITED">
    </div>

    <div class="form-group">
      <label>Line 3 (Warehouse)</label>
      <input type="text" id="line3" value="Hyderabad H3 - Feeder Warehouse">
    </div>

    <div class="form-group">
      <label>UPC Data (UPC,Quantity)</label>
      <textarea id="upcData" placeholder="20110519,31&#10;20110520,15&#10;20110521,6"></textarea>
    </div>

    <button onclick="generateLabels()">Generate Preview</button>
    <button class="btn-print" onclick="window.print()">Print Labels</button>
  </div>

  <div id="previewArea"></div>

  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

  <script>
    function generateLabels() {
      const line1 = document.getElementById('line1').value;
      const line2 = document.getElementById('line2').value;
      const line3 = document.getElementById('line3').value;
      const rawData = document.getElementById('upcData').value.trim();

      if (!rawData) { alert("Please enter UPC data."); return; }

      const items = rawData.split('\n')
        .filter(l => l.trim())
        .map(l => {
          const [u, q] = l.split(',');
          return { upc: u?.trim(), qty: q?.trim() || '1' };
        })
        .filter(i => i.upc);

      const previewArea = document.getElementById('previewArea');
      previewArea.innerHTML = ''; 

      for (let i = 0; i < items.length; i += 3) {
        const page = document.createElement('div');
        page.className = 'page';
        const chunk = items.slice(i, i + 3);

        for (let j = 0; j < 3; j++) {
          const item = chunk[j];
          const labelDiv = document.createElement('div');
          labelDiv.className = 'label-container';

          if (item) {
            const bcId = `bc-${i}-${j}`;
            // Applied specific classes based on user request
            labelDiv.innerHTML = `
              <div class="txt-primary">${line1}</div>
              <div class="txt-secondary">${line2}</div>
              <div class="txt-secondary">${line3}</div>
              <svg id="${bcId}" class="barcode-svg"></svg>
              <div class="txt-secondary">UPC - ${item.upc}</div>
              <div class="txt-secondary">Quantity - ${item.qty}</div>
            `;
            
            page.appendChild(labelDiv);

            setTimeout(() => {
              JsBarcode(`#${bcId}`, item.upc, {
                format: "CODE128",
                width: 3,
                height: 70,
                displayValue: true,
                fontSize: 20,
                margin: 5
              });
            }, 0);
          } else {
            labelDiv.style.border = "none"; 
            page.appendChild(labelDiv);
          }
        }
        previewArea.appendChild(page);
      }
    }
  </script>

</body>
</html>
